# 23 个设计模式之一 -- 迭代器模式

## 问题解答

- 什么是设计模式
  - 设计模式是软件工程中用来解决特定问题的通用且可重用的方案
- 设计模式怎么演化来的
  - 是软件开发过程中通过自下而上的总结归纳提炼出来的
- 软件开发为什么需要设计模式
  - 为了解决软件开发过程中出现的这些问题，需要以工程化的方法引入方法论和规范化的开发流程，主要解决软件质量、软件可维护可拓展性的问题

## 迭代器模式

### 定义

迭代器模式是提供一种方法顺序访问一个聚合对象中的各个元素，而又不暴露聚合对象的内部的表示

### 应用场景

这种设计模式通常应用于集合类，使得客户端代码可以忽略集合的内部结构，无论是数组、链表、还是其他复杂的数据结构，都能以统一的方式进行遍历。迭代器模式配合闭包，可以让 rust 实现高效的函数式编程

rust 实现迭代器模式很简单，只需要实现`Iterator trait`即可。`Iterator`中定义了抽象的行为，集合类只需实现它并重写`item`和`next`方法即可

只要实现了`Iterator`特征，在遍历集合时不需要知道集合的内部表示，不管是`List`、`HashMap`、`Set`、`LinkedList`还是其他什么类型的集合，都可以使用同样的方式来遍历。

### 遵循的规则

结构体和迭代器是抽离的，可以独立变化，结构体负责存储和表示数据，迭代器负责遍历，分工明确，遵循单一职责原则。

迭代器是一组行为的抽象，不同的集合都可以实现迭代器，拥有很好的拓展性。

集合依赖于抽象的`trait`，遵循依赖倒置原则

